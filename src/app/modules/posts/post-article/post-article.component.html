<div class="container" *ngIf="parentPost">
  <div class="post-list">
    <!-- Upper post -->
    <div *ngFor="let upperPost of parentPost.parent">
      <app-post
        [publishConfig]="{destination:0}"
        [post]="upperPost"
        [inputConfig]="{owner:false, thread: true}">
        </app-post>
    </div>
    <!-- Main Post -->
    <div class="main-post">
      <app-post
      [reload]="reloadPost"
      [publishConfig]="{destination: 1}"
      [post]="parentPost"
      [inputConfig]="{owner:false}">
      </app-post>
    </div>
    <!-- Comments -->
    <div class="reply-container" *ngFor="let reply of parentPost.child; index as pIndex">
      <app-post
      [publishConfig]="{destination:2, parentIndex: pIndex, end: true}"
      [deleteConfig]="{destination:1, parentIndex: pIndex}"
      [post]="reply"
      [inputConfig]="{thread: (reply.child?.length !== 0)}">
      </app-post>

      <div *ngFor="let childReply of reply.child; index as cIndex; last as isLast">
        <div class="reply">
          <app-post
          [publishConfig]="{destination:0}"
          [deleteConfig]="{destination:2, parentIndex: pIndex, childIndex: cIndex}"
          [post]="childReply"
          [inputConfig]="{thread: !isLast}">
          </app-post>
        </div>
      </div>
    </div>
  </div>
</div>