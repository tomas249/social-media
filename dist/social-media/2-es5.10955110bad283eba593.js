function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"305l":function(e,t,n){"use strict";n.r(t),n.d(t,"AuthModule",(function(){return J}));var o,r=n("ofXK"),i=n("3Pt+"),s=n("tyNb"),a=n("fXoL"),c=n("vkgz"),u=n("H+bZ"),l=n("rj1t"),g=((o=function(){function e(t,n,o){_classCallCheck(this,e),this.api=t,this.token=n,this.router=o}return _createClass(e,[{key:"register",value:function(e){return this.api.post("/auth/register",e)}},{key:"login",value:function(e){var t=this;return this.api.post("/auth/login",e).pipe(Object(c.a)((function(e){t.token.setTokens(e.data.refreshToken,e.data.accessToken)})))}},{key:"logout",value:function(){this.token.removeTokens(),this.router.navigate(["/explore"])}}]),e}()).\u0275fac=function(e){return new(e||o)(a.Sb(u.a),a.Sb(l.a),a.Sb(s.d))},o.\u0275prov=a.Fb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),m=n("N3Xk"),h=n("Kszi");function f(e,t){if(1&e&&(a.Ob(0,"p",9),a.uc(1),a.Nb()),2&e){var n=t.$implicit,o=a.ac(2);a.fc("ngClass",o.success?"success":"error"),a.zb(1),a.wc(" ",n," ")}}function b(e,t){if(1&e&&(a.Ob(0,"div",7),a.sc(1,f,2,2,"p",8),a.Nb()),2&e){var n=a.ac();a.zb(1),a.fc("ngForOf",n.messageList)}}var p,d=((p=function(){function e(t,n,o,r,s,c){_classCallCheck(this,e),this.fb=t,this.auth=n,this.token=o,this.router=r,this.navbarService=s,this.modalService=c,this.modalBox=!1,this.loginResponse=new a.n,this.messageList=[],this.success=!1,this.navigateEnd=!0,this.loginForm=this.fb.group({email:["",[i.i.required,i.i.maxLength(50),i.i.email]],password:["",[i.i.required,i.i.minLength(4),i.i.maxLength(40)]]})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"errorMessages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{required:(e=e.charAt(0).toUpperCase()+e.slice(1))+" field is required",maxlength:"".concat(e," field max length is ").concat(n," characters"),minlength:"".concat(e," field min length is ").concat(n," characters"),email:"Enter a valid email"}[t]}},{key:"getFormValidationErrors",value:function(){var e=this;this.messageList=[],Object.keys(this.loginForm.controls).forEach((function(t){var n=e.loginForm.get(t).errors;null!==n&&Object.keys(n).forEach((function(o){var r=n[o],i=e.errorMessages(t,o,"object"==typeof r?r.requiredLength:null);e.messageList.push(i)}))}))}},{key:"onLogin",value:function(){var e=this;if(this.getFormValidationErrors(),!this.loginForm.invalid){var t={email:this.loginForm.get("email").value.toLowerCase(),password:this.loginForm.get("password").value};this.auth.login(t).subscribe((function(t){e.modalService.emitResponse(!0,!0),e.navigateEnd&&e.navbarService.go("/explore")}),(function(t){var n=t.error;e.success=n.success,e.messageList.push(n.message)}))}}}]),e}()).\u0275fac=function(e){return new(e||p)(a.Jb(i.b),a.Jb(g),a.Jb(l.a),a.Jb(s.d),a.Jb(m.a),a.Jb(h.a))},p.\u0275cmp=a.Db({type:p,selectors:[["app-login"]],inputs:{modalBox:"modalBox"},outputs:{loginResponse:"loginResponse"},decls:9,vars:2,consts:[[1,"auth-container"],[1,"auth",3,"formGroup","ngSubmit"],[1,"title"],["formControlName","email","autocomplete","on","type","text","placeholder","Email",1,"input"],["formControlName","password","autocomplete","on","type","password","placeholder","Password",1,"input"],["type","submit",1,"input","button","btn"],["class","message",4,"ngIf"],[1,"message"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(a.Ob(0,"div",0),a.Ob(1,"form",1),a.Wb("ngSubmit",(function(){return t.onLogin()})),a.Ob(2,"span",2),a.uc(3,"Sign in"),a.Nb(),a.Kb(4,"input",3),a.Kb(5,"input",4),a.Ob(6,"button",5),a.uc(7,"Login"),a.Nb(),a.sc(8,b,2,1,"div",6),a.Nb(),a.Nb()),2&e&&(a.zb(1),a.fc("formGroup",t.loginForm),a.zb(7),a.fc("ngIf",0!==t.messageList.length))},directives:[i.j,i.g,i.d,i.a,i.f,i.c,r.k,r.j,r.i],styles:[".auth-container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:center}.auth[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:700%}.title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:400;text-align:center}.input[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;font-size:1rem;border-radius:16px;outline:0;border:0;color:#495057;letter-spacing:.2rem;font-weight:500}.btn[_ngcontent-%COMP%]{width:100%;cursor:pointer;color:var(--text-color);background-color:var(--primary-color);font-weight:700}.disabled[_ngcontent-%COMP%]{background-color:var(--hover-color);cursor:not-allowed}.btn[_ngcontent-%COMP%]:hover:not(.disabled){background-color:#15ac59}.message[_ngcontent-%COMP%]{margin-top:2rem}.message[_ngcontent-%COMP%], .success[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem}.success[_ngcontent-%COMP%]{color:var(--primary-color)}.error[_ngcontent-%COMP%]{color:#ff4040;text-align:center;font-size:1.2rem}"]}),p);function v(e,t){if(1&e&&(a.Ob(0,"p",11),a.uc(1),a.Nb()),2&e){var n=t.$implicit,o=a.ac(2);a.fc("ngClass",o.success?"success":"error"),a.zb(1),a.wc(" ",n," ")}}function C(e,t){if(1&e&&(a.Ob(0,"div",9),a.sc(1,v,2,2,"p",10),a.Nb()),2&e){var n=a.ac();a.zb(1),a.fc("ngForOf",n.messageList)}}var O,y,k,w,_,P,M=((y=function(){function e(t,n){_classCallCheck(this,e),this.auth=t,this.fb=n,this.messageList=[],this.success=!1,this.registerForm=this.fb.group({name:["",[i.i.required,i.i.minLength(4),i.i.maxLength(30),this.noEmail.bind(this)]],email:["",[i.i.required,i.i.maxLength(50),i.i.email]],password:["",[i.i.required,i.i.minLength(4),i.i.maxLength(40)]],confirmPassword:["",[i.i.required,this.mustMatch.bind(this)]]})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"noEmail",value:function(e){var t=e.value;if(t&&-1!==t.indexOf("@"))return{isEmail:"yes"}}},{key:"mustMatch",value:function(e){return this.registerForm?this.registerForm.value.password===e.value?null:{mustMatch:"true"}:null}},{key:"errorMessages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{required:(e=e.charAt(0).toUpperCase()+e.slice(1))+" field is required",maxlength:"".concat(e," field max length is ").concat(n," characters"),minlength:"".concat(e," field min length is ").concat(n," characters"),mustMatch:"Both passwords must match",isEmail:e+" can not contain @",email:"Enter a valid email"}[t]||"Unrecognized validator (Field: ".concat(e,", KeyError: ").concat(t,")")}},{key:"getFormValidationErrors",value:function(){var e=this;this.messageList=[],Object.keys(this.registerForm.controls).forEach((function(t){var n=e.registerForm.get(t).errors;null!==n&&Object.keys(n).forEach((function(o){var r=n[o],i=e.errorMessages(t,o,"object"==typeof r?r.requiredLength:null);e.messageList.push(i)}))}))}},{key:"onRegister",value:function(){var e=this;if(this.getFormValidationErrors(),!this.registerForm.invalid){var t={name:this.registerForm.get("name").value,email:this.registerForm.get("email").value.toLowerCase(),password:this.registerForm.get("password").value};this.auth.register(t).subscribe((function(t){console.warn(t),e.success=t.success,e.messageList.push(t.message),e.registerForm.reset()}),(function(t){var n=t.error;e.success=n.success,e.messageList.push(n.message)}))}}}]),e}()).\u0275fac=function(e){return new(e||y)(a.Jb(g),a.Jb(i.b))},y.\u0275cmp=a.Db({type:y,selectors:[["app-register"]],decls:11,vars:2,consts:[[1,"auth-container"],[1,"auth",3,"formGroup","ngSubmit"],[1,"title"],["formControlName","name","autocomplete","on","type","text","placeholder","Name (can be changed)",1,"input"],["formControlName","email","autocomplete","on","type","text","placeholder","Email",1,"input"],["formControlName","password","autocomplete","on","type","password","placeholder","Password",1,"input"],["formControlName","confirmPassword","type","password","placeholder","Confirm Password",1,"input"],["type","submit",1,"input","button","btn"],["class","message",4,"ngIf"],[1,"message"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(e,t){1&e&&(a.Ob(0,"div",0),a.Ob(1,"form",1),a.Wb("ngSubmit",(function(){return t.onRegister()})),a.Ob(2,"span",2),a.uc(3,"Sign up"),a.Nb(),a.Kb(4,"input",3),a.Kb(5,"input",4),a.Kb(6,"input",5),a.Kb(7,"input",6),a.Ob(8,"button",7),a.uc(9,"Create account"),a.Nb(),a.sc(10,C,2,1,"div",8),a.Nb(),a.Nb()),2&e&&(a.zb(1),a.fc("formGroup",t.registerForm),a.zb(9),a.fc("ngIf",0!==t.messageList.length))},directives:[i.j,i.g,i.d,i.a,i.f,i.c,r.k,r.j,r.i],styles:[".auth-container[_ngcontent-%COMP%]{height:auto;justify-content:center}.auth[_ngcontent-%COMP%], .auth-container[_ngcontent-%COMP%]{width:100%;display:flex}.auth[_ngcontent-%COMP%]{flex-direction:column}.title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:400;text-align:center}.input[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;font-size:1rem;border-radius:16px;outline:0;border:0;color:#495057;letter-spacing:.2rem;font-weight:500}.btn[_ngcontent-%COMP%]{width:100%;cursor:pointer;color:var(--text-color);background-color:var(--primary-color);font-weight:700}.disabled[_ngcontent-%COMP%]{background-color:var(--hover-color);cursor:not-allowed}.btn[_ngcontent-%COMP%]:hover:not(.disabled){background-color:#15ac59}.message[_ngcontent-%COMP%]{margin-top:2rem}.message[_ngcontent-%COMP%], .success[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem}.success[_ngcontent-%COMP%]{color:var(--primary-color)}.error[_ngcontent-%COMP%]{color:#ff4040;text-align:center;font-size:1.2rem}"]}),y),N=((O=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||O)},O.\u0275cmp=a.Db({type:O,selectors:[["app-auth"]],decls:2,vars:0,consts:[[1,"container"]],template:function(e,t){1&e&&(a.Ob(0,"div",0),a.Kb(1,"router-outlet"),a.Nb())},directives:[s.f],styles:[".container[_ngcontent-%COMP%]{padding:2rem}"]}),O),L=n("yHma"),x=((k=function(){function e(t,n,o,r){_classCallCheck(this,e),this.auth=t,this.token=n,this.navbarService=o,this.locationService=r}return _createClass(e,[{key:"ngOnInit",value:function(){this.user=this.token.getUserData(),this.locationService.setStack(["Accounts"])}},{key:"logout",value:function(){confirm("Are you sure you want to close your account?")&&(this.token.removeTokens(),this.navbarService.go("/explore"),this.auth.logout())}}]),e}()).\u0275fac=function(e){return new(e||k)(a.Jb(g),a.Jb(l.a),a.Jb(m.a),a.Jb(L.a))},k.\u0275cmp=a.Db({type:k,selectors:[["app-accounts"]],decls:21,vars:3,consts:[[1,"container"],["colspan","2"],[2,"width","100%",3,"click"]],template:function(e,t){1&e&&(a.Ob(0,"div",0),a.Ob(1,"table"),a.Ob(2,"tr"),a.Ob(3,"td"),a.uc(4,"Name:"),a.Nb(),a.Ob(5,"td"),a.uc(6),a.Nb(),a.Nb(),a.Ob(7,"tr"),a.Ob(8,"td"),a.uc(9,"Username:"),a.Nb(),a.Ob(10,"td"),a.uc(11),a.Nb(),a.Nb(),a.Ob(12,"tr"),a.Ob(13,"td"),a.uc(14,"Id:"),a.Nb(),a.Ob(15,"td"),a.uc(16),a.Nb(),a.Nb(),a.Ob(17,"tr"),a.Ob(18,"td",1),a.Ob(19,"button",2),a.Wb("click",(function(){return t.logout()})),a.uc(20,"Logout"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.zb(6),a.vc(t.user.name),a.zb(5),a.wc("@",t.user.username,""),a.zb(5),a.vc(t.user.id))},styles:[".container[_ngcontent-%COMP%]{padding:2rem}"]}),k),F=n("P6bf"),z=((w=function(){function e(t,n,o,r){_classCallCheck(this,e),this.token=t,this.location=n,this.router=o,this.activatedRoute=r}return _createClass(e,[{key:"canActivate",value:function(){return!this.token.isLogged()}}]),e}()).\u0275fac=function(e){return new(e||w)(a.Sb(l.a),a.Sb(r.g),a.Sb(s.d),a.Sb(s.a))},w.\u0275prov=a.Fb({token:w,factory:w.\u0275fac,providedIn:"root"}),w),S=[{path:"",component:N,children:[{path:"login",component:d,canActivate:[z]},{path:"register",component:M,canActivate:[z]},{path:"accounts",component:x,canActivate:[F.a]}]}],E=((_=function e(){_classCallCheck(this,e)}).\u0275mod=a.Hb({type:_}),_.\u0275inj=a.Gb({factory:function(e){return new(e||_)},imports:[[s.e.forChild(S)],s.e]}),_),j=n("ecLf"),J=((P=function e(){_classCallCheck(this,e)}).components={AuthComponent:N,LoginComponent:d,RegisterComponent:M,AccountsComponent:x},P.menu={root:"Auth",trigger:["Login","Register"],children:[{name:"Login",component:"Login"},{name:"Register",component:"Register"}]},P.\u0275mod=a.Hb({type:P}),P.\u0275inj=a.Gb({factory:function(e){return new(e||P)},imports:[[r.c,E,i.e,i.h,j.a]]}),P)}}]);