{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/services/api-http.interceptor.ts","webpack:///src/app/services/api.service.ts","webpack:///src/app/services/location.service.ts","webpack:///src/app/services/token.service.ts","webpack:///src/app/shared/modal/modal.service.ts","webpack:///src/app/shared/navbar/navbar.service.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","loadChildren","m","MainModule","AppRoutingModule","forRoot","imports","AppComponent","title","selector","templateUrl","styleUrls","AppModule","provide","useClass","multi","declarations","providers","bootstrap","ApiHttpInterceptor","token","modalService","navbarService","isRefreshing","refreshTokenSubject","next","login","register","url","search","handle","getAccessToken","getRefreshToken","addToken","removeTokens","pipe","err","status","handle401Error","error","message","go","content","html","modal","type","location","action","stack","open","JSON","stringify","request","clone","setHeaders","refreshToken","res","accessToken","ApiService","http","baseUrl","payload","options","post","get","data","patch","key","mssg","push","providedIn","LocationService","_states","_location","_locationStack","location$","asObservable","join","joinStackAndSend","concat","config","remove","removeItemFromStack","actions","set","setStack","add","addItemToStack","count","splice","length","pop","TokenService","api","_user","user$","localStorage","getItem","storedUserData","getUserData","setItem","userJWT","atob","split","userParsed","parse","removeItem","isLogged","userData","role","newData","currentUser","newUser","Object","assign","ModalService","locationService","_responses","_modals","_actives","list","getCurrent","responseCb","oldType","oldModal","newModal","keepOpened","wrapper","hideModal","core","saveState","changeStackByAction","loadContent","params","displayModal","componentName","changeComponent","end","currentType","currentModal","previousType","previousModal","fn","onClose","typesList","slice","reverse","includes","component","name","parentType","coreComponent","restoreState","NavbarService","router","navcomponent","menu","current","idx","locStack","trigger","children","map","c","indexOf","selChildIdx","loadCustomMenu","activated","menuItemIdx","changeMenuItem","route","skipMenu","simulation","detectUrl","changeItem","navigate","getPathNames","environment","production","bootstrapModule","console"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\n/**\n *  Load all layouts in a lazy way\n */\n\nconst routes: Routes = [\n  {\n    path: '',\n    loadChildren: () => import('./layouts/main/main.module')\n      .then(m => m.MainModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'sm-refact';\n}\n","<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\n// Modules\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\n\n// Services\nimport { ApiHttpInterceptor } from './services/api-http.interceptor';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule\n  ],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: ApiHttpInterceptor,\n      multi: true\n    }\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","\nimport { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor, HttpErrorResponse } from '@angular/common/http';\nimport { TokenService } from './token.service';\nimport { Observable, throwError, BehaviorSubject, of } from 'rxjs';\nimport { catchError, filter, take, switchMap, retryWhen } from 'rxjs/operators';\nimport { ModalService } from '../shared/modal/modal.service';\nimport { NavbarService } from '../shared/navbar/navbar.service';\n\n@Injectable()\nexport class ApiHttpInterceptor implements HttpInterceptor {\n  \n  isRefreshing = false;\n  refreshTokenSubject: BehaviorSubject<any> = new BehaviorSubject<any>(null);\n  \n  constructor(\n    public token: TokenService,\n    private modalService: ModalService,\n    private navbarService: NavbarService\n    ) { }\n    \n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n      \n      // Exclude some api requests\n      const login = '/api/auth/login';\n      const register = '/api/auth/register';\n      \n      if (req.url.search(login) != -1 ||\n          req.url.search(register) != -1\n          ){\n          return next.handle(req);\n      }\n      \n      // Send request with AccessToken\n      if (this.token.getAccessToken() && this.token.getRefreshToken()) {\n        req = this.addToken(req, this.token.getAccessToken());\n      } else {\n        this.token.removeTokens();\n      }\n      \n      return next.handle(req).pipe(\n        catchError(err => {\n\n          // if (!navigator.onLine) {\n          //   return throwError({error: 'Could not get response. Check your connection.'});\n          // }\n          // else {\n          //   return throwError(err);\n          // }\n          if (err instanceof HttpErrorResponse && err.status === 401) {\n            return this.handle401Error(req, next);\n          }\n          else if (err instanceof HttpErrorResponse &&\n            err.error.message === 'Invalid RefreshToken') {\n            this.token.removeTokens();\n            this.navbarService.go('/explore');\n            const content = [\n              { title: 'Session revoked' },\n              { html:  `<p>Your sessions was revoked, login again please</p>` }\n            ];\n            const modal = {type: 'default', content};\n            const location = {action: 'set', stack: ['Error']};\n            this.modalService.open(modal, location);\n            return throwError('Session revoked');\n          }\n          else {\n            const content = [\n              { title: 'Error was found' },\n              { html: '<p>Got the following error:</p>' },\n              { html:  `<p>${JSON.stringify(err.error.message)}</p>` }\n            ];\n            const modal = {type: 'default', content};\n            const location = {action: 'set', stack: ['Unhandled Error']};\n            this.modalService.open(modal, location);\n            return throwError(err.error.message);\n          }\n        }));\n      }\n      \n      addToken(request: HttpRequest<any>, token: string) {\n        return request.clone({\n          setHeaders: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n      }\n      \n      handle401Error(request: HttpRequest<any>, next: HttpHandler) {\n        if (!this.isRefreshing) {\n          this.isRefreshing = true;\n          this.refreshTokenSubject.next(null);\n          \n          return this.token.refreshToken().pipe(\n            switchMap((res: any) => {\n              this.isRefreshing = false;\n              this.refreshTokenSubject.next(res.accessToken);\n              return next.handle(this.addToken(request, res.accessToken));\n            }));\n            \n        } else {\n          return this.refreshTokenSubject.pipe(\n            filter(res => res != null),\n            take(1),\n            switchMap(res => {\n              return next.handle(this.addToken(request, res.accessToken));\n            }));\n        }\n      }\n          \n}","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\nimport { catchError, delay, filter, map, tap } from 'rxjs/operators';\nimport { of, throwError } from 'rxjs';\nimport { ModalService } from 'src/app/shared/modal/modal.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApiService {\n\n  baseUrl = environment.baseUrl + '/api';\n\n  constructor(\n    private http: HttpClient,\n    private modalService: ModalService\n  ) { }\n\n  post(url: string, payload: object, options={}) {\n    return this.http.post<any>(`${this.baseUrl}${url}`, payload, options);\n  }\n\n  get(url: string) {\n    return this.http.get<any>(`${this.baseUrl}${url}`).pipe(\n      map(res => res.data || res));\n  }\n\n  patch(url: string, payload: object) {\n    return this.http.patch<any>(`${this.baseUrl}${url}`, payload);\n  }\n\n  delete(url: string) {\n    return this.http.delete<any>(`${this.baseUrl}${url}`);\n  }\n\n  errorHandler(modalService, err) {\n    const content = [\n      { title: 'Error' },\n      { html: '<p>Got the following error:</p>' },\n    ];\n    for (let key in err) {\n      const mssg = `<p><strong>${key}</strong>: ${JSON.stringify(err[key])}</p>`;\n      content.push({html: mssg});\n    }\n    const modal = {type: 'extended', content};\n    const location = {action: 'set', stack: ['Unhandled Error']};\n    modalService.open(modal, location);\n    return of(null);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Subject, Observable, of } from 'rxjs';\nimport { delay } from 'rxjs/operators';\nimport { ModalService } from '../shared/modal/modal.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LocationService {\n\n  private _states = [];\n\n  private _location = new BehaviorSubject<string>('');\n  private _locationStack: Array<string> = [];\n\n  location$ = this._location.asObservable()\n\n  constructor() { }\n\n  private joinStackAndSend(stack) {\n    const location = stack.join(' > ');\n    this._location.next(location);\n  }\n\n  setStack(stack) {\n    if (!stack) return;\n\n    this._locationStack = stack;\n    this.joinStackAndSend(this._locationStack);\n  }\n\n  addItemToStack(stack) {\n    this._locationStack = this._locationStack.concat(stack);\n    this.joinStackAndSend(this._locationStack);\n  }\n\n  changeStackByAction(config:{action:string, stack?:Array<string>, remove?:number}) {\n    const {action, stack, remove} = config;\n\n    if (action === 'none') return;\n\n    // Remove stack if specified\n    if (remove) {\n      this.removeItemFromStack(remove);\n    }\n\n    const actions = {\n      set: (stack) => this.setStack(stack),\n      add: (stack) => this.addItemToStack(stack)\n    };\n    actions[action](stack);\n  }\n\n  removeItemFromStack(count=1) {\n    this._locationStack.splice(this._locationStack.length-count);\n  }\n\n  saveState() {\n    // Must be a copy because otherwise methods like pop, slice...\n    // will affect the saved state\n    this._states.push([...this._locationStack]);\n  }\n\n  restoreState() {\n    this._locationStack = this._states[this._states.length-1];\n    this.joinStackAndSend(this._locationStack);\n    this._states.pop();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ApiService } from './api.service';\nimport { tap, map } from 'rxjs/operators';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TokenService {\n\n  private _user = new BehaviorSubject<any>(false);\n\n  user$ = this._user.asObservable();\n\n  constructor(\n    private api: ApiService,\n  ) {\n    // Check tokens existence\n    const refreshToken = localStorage.getItem('refreshToken');\n    const accessToken = localStorage.getItem('accessToken');\n\n    if (refreshToken && accessToken) {\n      const storedUserData = this.getUserData();\n      this._user.next(storedUserData);\n    }\n    else if (!refreshToken || !accessToken) {\n      this.removeTokens();\n    }\n  }\n\n\n  setTokens(refreshToken: string, accessToken: string) {\n    localStorage.setItem('refreshToken', refreshToken);\n    localStorage.setItem('accessToken', accessToken);\n\n    const userJWT = atob(accessToken.split('.')[1]);\n    const userParsed = JSON.stringify(JSON.parse(userJWT));\n\n    localStorage.setItem('userData', userParsed);\n  \n    this._user.next(JSON.parse(userJWT));\n  }\n\n  removeTokens() {\n    this._user.next(false);\n    localStorage.removeItem('refreshToken');\n    localStorage.removeItem('accessToken');\n    localStorage.removeItem('userData');\n  }\n\n  getUserData() {\n    if (this.isLogged()) {\n      return JSON.parse(localStorage.getItem('userData'));\n    } else {\n      return false;\n    }\n  }\n\n  getRefreshToken() {\n    return localStorage.getItem('refreshToken');\n  }\n\n  getAccessToken() {\n    return localStorage.getItem('accessToken');\n  }\n\n  isLogged() {\n    return !!this.getAccessToken();\n  }\n\n  getUserId() {\n    if (this.isLogged()) {\n      return this.getUserData().id;\n    } else {\n      return null;\n    }\n  }\n\n  isPublisher() {\n    const userData = this.getUserData();\n    if (userData) {\n      return (userData.role == 'publisher' || userData.role == 'admin');\n    } else {\n      return false;\n    }\n  }\n\n  isAdmin() {\n    const userData = this.getUserData();\n    if (userData) {\n      return userData.role == 'admin';\n    } else {\n      return false;\n    }\n  }\n\n  refreshToken() {\n    const payload = {\n      refreshToken: this.getRefreshToken()\n    }\n    return this.api.post('/tokens/refresh', payload).pipe(\n      map(res => res.message),\n      tap(res => {\n        localStorage.setItem('accessToken', res.accessToken);\n      })\n    );\n  }\n\n  updateData(newData) {\n    const currentUser = this.getUserData();\n    const newUser = Object.assign(currentUser, newData);\n    localStorage.setItem('userData', JSON.stringify(newUser));\n    this._user.next(newUser);\n  }\n\n}","import { Injectable } from '@angular/core';\nimport { LocationService } from 'src/app/services/location.service'; \nimport { NavbarService } from '../navbar/navbar.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ModalService {\n  /*\n   *         / Type - Core\n   *        /----------/\n   * Service - Type - Core\n   *    \\\\  \\----------/\n   *     \\\\--------\\\n   *      \\ Type - Core\n   * \n   * - Service stores TypeModals & its CoreComponent\n   * - Core stores same type instances\n   * \n   * RULES:\n   *  - You can concat different types:\n   *    Ex: default, default, extended\n   * \n   *  - You cannot intercalate different types:\n   *    Ex: default, extended, default\n  */\n  private _responses = [];\n  private _modals = {};\n  private _actives = {\n    list: [],\n    getCurrent: function() { return this.list[this.list.length-1] }\n  }; // Store only type name\n\n  constructor(\n    private locationService: LocationService,\n    private navbarService: NavbarService\n  ) {\n  }\n\n  /**\n   * \n   * CLIENT CONTROLS\n   * \n   */\n  // open(type, content, params?, location?, menu?) {\n  open(modal: {type:string, content:any, params?:any, keepOpened?:boolean},\n       location: {action:string, stack?:Array<string>, remove?:number}, responseCb?) {\n    /*\n        Check actives:\n          -empty:                            (3)loadContent, (4)displayNew\n          - same:            (2)saveContent, (3)loadContent\n          - diff: (1)hideOld,                (3)loadContent, (4)displayNew\n\n        Before step 3, save location state\n        Current modal becomes old\n        Requested modal becomes new\n     */\n\n    const oldType = this._actives.getCurrent();\n    const oldModal = this._modals[oldType];\n    const newModal = this._modals[modal.type];\n\n    // (1) Hide old - { different }\n    if (!modal.keepOpened && oldType && oldType !== modal.type) {\n      // oldModal.wrapper.display = false;\n      oldModal.wrapper.hideModal();\n    }\n\n    // (2) Save old content - { same }\n    if (oldType === modal.type) {\n      oldModal.core.saveState();\n    }\n\n    // (*3) Save current location before loading new modal\n    this.locationService.saveState();\n    this.locationService.changeStackByAction(location);\n    // (*3) Save navbar menu sate\n    this.navbarService.saveState();\n\n\n    // (3) Load new content & set as active - { empty, same, different }\n    newModal.core.loadContent(modal.content);\n    this._actives.list.push(modal.type);\n\n    // (4) Display wrapper- { empty, different }\n    if (!oldType || oldType !== modal.type) {\n      // Assign params\n      newModal.wrapper = Object.assign(newModal.wrapper, modal.params);\n\n      // newModal.wrapper.display = true;\n      newModal.wrapper.displayModal();\n    }\n\n    // Save callback fn that will be used on emitResponse\n    this._responses.push(responseCb);\n  }\n\n  changeComponent(componentName) {\n    const type = this._actives.getCurrent();\n    const modal = this._modals[type];\n    modal.core.changeComponent(componentName);\n  }\n\n  emitResponse(end, res=null) {\n    // If no modal opened then return\n    if (this._actives.list.length === 0) return;\n\n    if (!end) {\n      const currentType = this._actives.getCurrent()\n      const currentModal = this._modals[currentType];\n      currentModal.wrapper.hideModal();\n\n      // Display if previous modal exists\n      const previousType = this._actives.list[this._actives.list.length-2];\n      if (previousType) {\n        const previousModal = this._modals[previousType];\n        previousModal.wrapper.displayModal();\n      }\n    }\n\n    // Check if response callback fn was given\n    const fn = this._responses[this._responses.length-1];\n    // If there is res cb fn and respose, run it\n    if (fn && res !== null) fn(res);\n    // If it is last emit, then close modal\n    if (end) {\n      const type = this._actives.getCurrent()\n      const modal = this._modals[type];\n      modal.core.onClose();\n    }\n  }\n\n  forceClose(count=1) {\n    // Count == 0 -> all list\n    const typesList = count === 0 ?\n      this._actives.list :\n      this._actives.list\n        .slice(this._actives.list.length-count)\n        .reverse() ;\n    // Important to use a copy, because we are working with a\n    // property that after the first iteration will be modified\n    for (const type of [...typesList]) {\n      // If nothing to close, return\n      if (!type) return;\n\n      // Trigger onClose()\n      // Once the core is clear, it will trigger close()\n      // from this service\n      const modal = this._modals[type];\n      modal.core.onClose();\n    }\n  }\n\n  closeByType(type) {\n    \n    if (!this._actives.list.includes(type)) return;\n    const modal = this._modals[type];\n    modal.core.onClose();\n  }\n\n\n\n\n  /**\n   * \n   * TYPEcomponent CONTROLS\n   * \n   */\n  initType(type, component) {\n    this._modals[type] = { \n      name: type,\n      wrapper: component\n    };\n  }\n  // changeContent(newContent, index?) {\n  //   const currentType = this._actives.getCurrent();\n  //   if (!currentType) return;\n\n  //   console.log(currentType);\n\n  //   this._modals[currentType].core.changeContent(newContent, index);\n  // }\n\n\n\n\n  /**\n   * \n   * COREcomponent CONTROLS\n   * \n   */\n  initCore(parentType, coreComponent) {\n    this._modals[parentType]['core'] = coreComponent;\n  }\n\n  close(type) {\n    // If nothing to close, return\n    if (!type) return;\n\n    // Remove response callback\n    this._responses.pop();\n\n    // Restore location & menu\n    this.locationService.restoreState();\n    this.navbarService.restoreState();\n\n    this._actives.list.pop();\n    this._responses.pop();\n\n    const previousType = this._actives.getCurrent();\n    const previousModal = this._modals[previousType];\n    const currentModal = this._modals[type];\n\n    if (!previousType) {\n      // currentModal.wrapper.display = false;\n      currentModal.wrapper.hideModal();\n    }\n    else if (previousType === type) {\n      previousModal.core.restoreState();\n    }\n    else if (previousType !== type) {\n      // currentModal.wrapper.display = false;\n      currentModal.wrapper.hideModal();\n      // previousModal.wrapper.display = true;\n      previousModal.wrapper.displayModal();\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { LocationService } from 'src/app/services/location.service';\nimport { ModalService } from '../modal/modal.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NavbarService {\n\n  navcomponent;\n\n  constructor(\n    private locationService: LocationService,\n    private router: Router\n  ) { }\n\n  init(component) {\n    this.navcomponent = component;\n  }\n\n  loadMenu(menu, current?) {\n    // Check if menu has components or paths\n    let idx;\n    let locStack = [];\n    if (current) {\n      if (!menu.trigger.includes(current.component)) return;\n      idx = menu.children.map(c => c.component).indexOf(current.component);\n    }\n    else {\n      idx = menu.selChildIdx;\n      // If root name provided, use it do define root location\n      if (menu.name) {\n        locStack.push(menu.name);\n      }\n    }\n\n    this.navcomponent.loadCustomMenu(menu.children, idx);\n\n    // Set location only if it is not a reactivation\n    if (menu.activated) {\n      locStack.push(menu.children[idx].name)\n      this.locationService.setStack(locStack);\n    }\n\n  }\n\n  changeMenuItem(menuItemIdx) {\n    this.navcomponent.changeMenuItem(menuItemIdx);\n  }\n\n  saveState() {\n    this.navcomponent.saveState();\n  }\n\n  restoreState() {\n    this.navcomponent.restoreState();\n  }\n\n  compareAndSelect(route, skipMenu=false) {\n    this.navcomponent.simulation = true;\n\n    const url = this.navcomponent.detectUrl(route);\n    this.navcomponent.changeItem(url, skipMenu);\n  }\n\n  go(path, skipMenu=false) {\n    // Navigate\n    this.router.navigate([path]);\n    const url = this.navcomponent.detectUrl(path);\n    // Change selected navbar item and load menu list\n\n    this.navcomponent.changeItem(url, skipMenu);\n    // Change location\n    this.locationService.setStack(this.navcomponent.getPathNames(url));\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  baseUrl: 'http://localhost:3000'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}