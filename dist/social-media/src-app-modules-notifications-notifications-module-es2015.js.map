{"version":3,"sources":["./src/app/modules/notifications/notifications-list/notifications-list.component.ts","./src/app/modules/notifications/notifications-list/notifications-list.component.html","./src/app/modules/notifications/notifications-routing.module.ts","./src/app/modules/notifications/notifications.module.ts","./src/app/modules/notifications/notifications.service.ts","./src/app/pipes/date-ago.pipe.ts","./src/app/pipes/pipes.module.ts","./src/app/pipes/user.pipe.ts"],"names":[],"mappings":"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","file":"src-app-modules-notifications-notifications-module-es2015.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NotificationsService } from '../notifications.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavbarService } from 'src/app/shared/navbar/navbar.service';\n\n@Component({\n  selector: 'app-notifications-list',\n  templateUrl: './notifications-list.component.html',\n  styleUrls: ['./notifications-list.component.css']\n})\nexport class NotificationsListComponent implements OnInit {\n\n  isLogged = false;\n  notificationsList;\n  notificationsCount = 2;\n  notificationsFilter;\n\n  constructor(\n    private notifications: NotificationsService,\n    private route: ActivatedRoute,\n    private navbarService: NavbarService\n  ) { }\n\n  ngOnInit(): void {\n    this.notificationsFilter = this.route.snapshot.data['filter'];\n\n    this.notifications.getNotifications(this.notificationsFilter === 'unread').subscribe(res => {\n      this.notificationsList = res.reverse();\n    });\n  }\n\n  markAsRead(notification) {\n    if (this.notificationsFilter === 'all') {\n      notification.read = true;\n    } else {\n      this.notificationsList = this.notificationsList.filter(n => n !== notification);\n    }\n    this.notifications.markAsRead(notification._id).subscribe();\n  }\n\n  goToUser(uid) {\n    this.navbarService.go(`/u/${uid}`);\n  }\n\n}\n","<div *ngIf=\"notificationsList\">\n  <div *ngFor=\"let notification of notificationsList\">\n    <div class=\"notification\">\n      <span class=\"responsible\" (click)=\"goToUser(notification.responsible._id)\">\n        {{ notification.responsible.name }}\n        &nbsp;(@{{ notification.responsible.username }})\n      </span>\n      <span>&nbsp;{{ notification.text }} - {{ notification.createdAt | dateAgo }}</span>\n      <button\n        *ngIf=\"!notification.read\"\n        class=\"read-button\" \n        (click)=\"markAsRead(notification)\">Mark as read</button>\n    </div>\n  </div>\n</div>\n<div *ngIf=\"notificationsList?.length === 0\" class=\"no-list\">\n  You do not have notifications\n</div>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n// Components\nimport { NotificationsListComponent } from './notifications-list/notifications-list.component';\n\nconst routes: Routes = [\n  // { path: ':notificationsFilter', component: NotificationsListComponent },\n  { path: 'all', component: NotificationsListComponent, data: {filter: 'all'} },\n  { path: 'unread', component: NotificationsListComponent, data: {filter: 'unread'} }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NotificationsRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NotificationsRoutingModule } from './notifications-routing.module';\nimport { NotificationsListComponent } from './notifications-list/notifications-list.component';\n\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\n@NgModule({\n  declarations: [\n    NotificationsListComponent,\n  ],\n  imports: [\n    CommonModule,\n    NotificationsRoutingModule,\n    PipesModule\n  ],\n})\nexport class NotificationsModule { }\n","import { Injectable } from '@angular/core';\n// import { Socket } from 'ngx-socket-io';\nimport { map } from 'rxjs/operators';\nimport { ApiService } from 'src/app/services/api.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NotificationsService {\n\n  constructor(\n    private api: ApiService,\n    // private socket: Socket\n  ) { }\n\n\n  getNotifications(onlyUnread = true) {\n    const queryParam = '?onlyUnread=' + onlyUnread;\n    return this.api.get('/notifications' + queryParam);\n  }\n\n  markAsRead(notificationId) {\n    return this.api.get('/notifications/read/' + notificationId);\n  }\n\n  // connect() {\n  //   this.socket.emit('everybody', 'hellooo people')\n  // }\n  \n\n  // sub() {\n  //   return this.socket.fromEvent('everybody');\n  // }\n\n  // sendMessage(){\n  //   console.log('myId', this.socket.ioSocket.id)\n  //   this.socket.emit(\"message\", this.socket.ioSocket.id);\n  // }\n\n  // getMessage() {\n  //   return this.socket\n  //     .fromEvent(\"message\");\n  // }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'dateAgo'\n})\nexport class DateAgoPipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    if (value) {\n      const seconds = Math.floor((+new Date() - +new Date(value)) / 1000);\n      if (seconds < 29) // less than 30 seconds ago will show as 'Just now'\n        return 'Just now';\n      const intervals = {\n        'year': 31536000,\n        'month': 2592000,\n        'week': 604800,\n        'day': 86400,\n        'hour': 3600,\n        'minute': 60,\n        'second': 1\n      };\n      let counter;\n      for (const i in intervals) {\n        counter = Math.floor(seconds / intervals[i]);\n        if (counter > 0)\n          if (counter === 1) {\n            return counter + ' ' + i + ' ago'; // singular (1 day ago)\n          } else {\n            return counter + ' ' + i + 's ago'; // plural (2 days ago)\n          }\n      }\n    }\n    return value;\n  }\n\n}\n","import { NgModule } from '@angular/core';\n\nimport { DateAgoPipe } from './date-ago.pipe';\nimport { UserPipe } from './user.pipe';\n\n@NgModule({\n  declarations: [\n    DateAgoPipe, \n    UserPipe\n  ],\n  exports: [\n    DateAgoPipe,\n    UserPipe\n  ]\n})\nexport class PipesModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'user'\n})\nexport class UserPipe implements PipeTransform {\n\n  transform(value: unknown, ...args: unknown[]): unknown {\n    return '@' + value;\n  }\n\n}\n"],"sourceRoot":"webpack:///"}