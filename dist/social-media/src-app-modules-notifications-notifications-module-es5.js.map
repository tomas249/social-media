{"version":3,"sources":["webpack:///src/app/modules/notifications/notifications-list/notifications-list.component.ts","webpack:///src/app/modules/notifications/notifications-list/notifications-list.component.html","webpack:///src/app/modules/notifications/notifications-routing.module.ts","webpack:///src/app/modules/notifications/notifications.module.ts","webpack:///src/app/modules/notifications/notifications.service.ts","webpack:///src/app/pipes/date-ago.pipe.ts","webpack:///src/app/pipes/pipes.module.ts","webpack:///src/app/pipes/user.pipe.ts"],"names":["NotificationsListComponent","notifications","route","navbarService","isLogged","notificationsCount","notificationsFilter","snapshot","data","getNotifications","subscribe","res","notificationsList","reverse","notification","read","filter","n","markAsRead","_id","uid","go","selector","templateUrl","styleUrls","routes","path","component","NotificationsRoutingModule","forChild","imports","exports","NotificationsModule","declarations","NotificationsService","api","onlyUnread","queryParam","get","notificationId","providedIn","DateAgoPipe","value","args","seconds","Math","floor","Date","intervals","counter","i","name","PipesModule","UserPipe"],"mappings":"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","file":"src-app-modules-notifications-notifications-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NotificationsService } from '../notifications.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavbarService } from 'src/app/shared/navbar/navbar.service';\n\n@Component({\n  selector: 'app-notifications-list',\n  templateUrl: './notifications-list.component.html',\n  styleUrls: ['./notifications-list.component.css']\n})\nexport class NotificationsListComponent implements OnInit {\n\n  isLogged = false;\n  notificationsList;\n  notificationsCount = 2;\n  notificationsFilter;\n\n  constructor(\n    private notifications: NotificationsService,\n    private route: ActivatedRoute,\n    private navbarService: NavbarService\n  ) { }\n\n  ngOnInit(): void {\n    this.notificationsFilter = this.route.snapshot.data['filter'];\n\n    this.notifications.getNotifications(this.notificationsFilter === 'unread').subscribe(res => {\n      this.notificationsList = res.reverse();\n    });\n  }\n\n  markAsRead(notification) {\n    if (this.notificationsFilter === 'all') {\n      notification.read = true;\n    } else {\n      this.notificationsList = this.notificationsList.filter(n => n !== notification);\n    }\n    this.notifications.markAsRead(notification._id).subscribe();\n  }\n\n  goToUser(uid) {\n    this.navbarService.go(`/u/${uid}`);\n  }\n\n}\n","<div *ngIf=\"notificationsList\">\n  <div *ngFor=\"let notification of notificationsList\">\n    <div class=\"notification\">\n      <span class=\"responsible\" (click)=\"goToUser(notification.responsible._id)\">\n        {{ notification.responsible.name }}\n        &nbsp;(@{{ notification.responsible.username }})\n      </span>\n      <span>&nbsp;{{ notification.text }} - {{ notification.createdAt | dateAgo }}</span>\n      <button\n        *ngIf=\"!notification.read\"\n        class=\"read-button\" \n        (click)=\"markAsRead(notification)\">Mark as read</button>\n    </div>\n  </div>\n</div>\n<div *ngIf=\"notificationsList?.length === 0\" class=\"no-list\">\n  You do not have notifications\n</div>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n// Components\nimport { NotificationsListComponent } from './notifications-list/notifications-list.component';\n\nconst routes: Routes = [\n  // { path: ':notificationsFilter', component: NotificationsListComponent },\n  { path: 'all', component: NotificationsListComponent, data: {filter: 'all'} },\n  { path: 'unread', component: NotificationsListComponent, data: {filter: 'unread'} }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class NotificationsRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NotificationsRoutingModule } from './notifications-routing.module';\nimport { NotificationsListComponent } from './notifications-list/notifications-list.component';\n\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\n@NgModule({\n  declarations: [\n    NotificationsListComponent,\n  ],\n  imports: [\n    CommonModule,\n    NotificationsRoutingModule,\n    PipesModule\n  ],\n})\nexport class NotificationsModule { }\n","import { Injectable } from '@angular/core';\n// import { Socket } from 'ngx-socket-io';\nimport { map } from 'rxjs/operators';\nimport { ApiService } from 'src/app/services/api.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NotificationsService {\n\n  constructor(\n    private api: ApiService,\n    // private socket: Socket\n  ) { }\n\n\n  getNotifications(onlyUnread = true) {\n    const queryParam = '?onlyUnread=' + onlyUnread;\n    return this.api.get('/notifications' + queryParam);\n  }\n\n  markAsRead(notificationId) {\n    return this.api.get('/notifications/read/' + notificationId);\n  }\n\n  // connect() {\n  //   this.socket.emit('everybody', 'hellooo people')\n  // }\n  \n\n  // sub() {\n  //   return this.socket.fromEvent('everybody');\n  // }\n\n  // sendMessage(){\n  //   console.log('myId', this.socket.ioSocket.id)\n  //   this.socket.emit(\"message\", this.socket.ioSocket.id);\n  // }\n\n  // getMessage() {\n  //   return this.socket\n  //     .fromEvent(\"message\");\n  // }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'dateAgo'\n})\nexport class DateAgoPipe implements PipeTransform {\n\n  transform(value: any, args?: any): any {\n    if (value) {\n      const seconds = Math.floor((+new Date() - +new Date(value)) / 1000);\n      if (seconds < 29) // less than 30 seconds ago will show as 'Just now'\n        return 'Just now';\n      const intervals = {\n        'year': 31536000,\n        'month': 2592000,\n        'week': 604800,\n        'day': 86400,\n        'hour': 3600,\n        'minute': 60,\n        'second': 1\n      };\n      let counter;\n      for (const i in intervals) {\n        counter = Math.floor(seconds / intervals[i]);\n        if (counter > 0)\n          if (counter === 1) {\n            return counter + ' ' + i + ' ago'; // singular (1 day ago)\n          } else {\n            return counter + ' ' + i + 's ago'; // plural (2 days ago)\n          }\n      }\n    }\n    return value;\n  }\n\n}\n","import { NgModule } from '@angular/core';\n\nimport { DateAgoPipe } from './date-ago.pipe';\nimport { UserPipe } from './user.pipe';\n\n@NgModule({\n  declarations: [\n    DateAgoPipe, \n    UserPipe\n  ],\n  exports: [\n    DateAgoPipe,\n    UserPipe\n  ]\n})\nexport class PipesModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'user'\n})\nexport class UserPipe implements PipeTransform {\n\n  transform(value: unknown, ...args: unknown[]): unknown {\n    return '@' + value;\n  }\n\n}\n"]}