(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{xZLo:function(t,e,o){"use strict";o.r(e),o.d(e,"PostsModule",(function(){return D}));var n=o("ofXK"),i=o("tyNb"),s=o("fXoL"),r=o("JIr8"),c=o("lJxs"),a=o("2Vo4"),l=o("z6cu"),b=o("H+bZ"),p=o("rj1t");let d=(()=>{class t{constructor(t,e){this.api=t,this.token=e,this.getNewPosts=new a.a([]),this.allPosts=[]}subscribeToNewPosts(){return this.getNewPosts}getAllPosts(){return this.api.get("/posts?parent[size]=0").pipe(Object(r.a)(t=>Object(l.a)("cannot get list")))}getPost(t){return this.api.get(`/posts?_id=${t}&childLevel=3`).pipe(Object(c.a)(t=>t.data.data[0]))}publishPost(t){if(!this.token.isLogged())return console.error("Please login"),Object(l.a)("");this.api.post("/posts",{text:t}).subscribe(t=>{this.allPosts=t.data.data,this.getNewPosts.next(this.allPosts)})}replyPost(t,e){return this.token.isLogged()?this.api.post(`/posts/${e}/reply`,{text:t}).pipe(Object(c.a)(t=>t.data)):(console.error("Please login"),Object(l.a)(""))}likePost(t){return this.token.isLogged()?this.api.get(`/posts/${t}/like`).pipe(Object(c.a)(t=>t.data)):(console.error("Please login"),Object(l.a)(""))}deletePost(t){return this.token.isLogged()?this.api.delete("/posts/"+t):(console.error("Please login"),Object(l.a)(""))}}return t.\u0275fac=function(e){return new(e||t)(s.Qb(b.a),s.Qb(p.a))},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=o("yHma");const h=["postInput"];let u=(()=>{class t{constructor(t){this.postsService=t,this.newPost=new s.n}ngOnInit(){}publishPost(t){t&&(this.postInput.nativeElement.innerText="",this.postIdReply?this.postsService.replyPost(t,this.postIdReply).subscribe(t=>{this.newPost.emit(t)}):this.postsService.publishPost(t))}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(d))},t.\u0275cmp=s.Bb({type:t,selectors:[["app-post-publish"]],viewQuery:function(t,e){var o;1&t&&s.pc(h,!0),2&t&&s.dc(o=s.Ub())&&(e.postInput=o.first)},inputs:{postIdReply:"postIdReply"},outputs:{newPost:"newPost"},decls:30,vars:0,consts:[[1,"a-profile"],["src","assets/avatar.png"],[1,"a-content"],["contenteditable","true","id","text-box","placeholder","What's happening?"],["postInput",""],[1,"a-buttons"],[1,"bttn-opt"],[1,"icon-box"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-image","opt-icon"],["fill-rule","evenodd","d","M14.002 2h-12a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-12-1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12z"],["d","M10.648 7.646a.5.5 0 0 1 .577-.093L15.002 9.5V14h-14v-2l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71z"],["fill-rule","evenodd","d","M4.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-images","opt-icon"],["fill-rule","evenodd","d","M12.002 4h-10a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1zm-10-1a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-10z"],["d","M10.648 8.646a.5.5 0 0 1 .577-.093l1.777 1.947V14h-12v-1l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71z"],["fill-rule","evenodd","d","M4.502 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM4 2h10a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1v1a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2h1a1 1 0 0 1 1-1z"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-camera-video","opt-icon"],["fill-rule","evenodd","d","M2.667 3.5c-.645 0-1.167.522-1.167 1.167v6.666c0 .645.522 1.167 1.167 1.167h6.666c.645 0 1.167-.522 1.167-1.167V4.667c0-.645-.522-1.167-1.167-1.167H2.667zM.5 4.667C.5 3.47 1.47 2.5 2.667 2.5h6.666c1.197 0 2.167.97 2.167 2.167v6.666c0 1.197-.97 2.167-2.167 2.167H2.667A2.167 2.167 0 0 1 .5 11.333V4.667z"],["fill-rule","evenodd","d","M11.25 5.65l2.768-1.605a.318.318 0 0 1 .482.263v7.384c0 .228-.26.393-.482.264l-2.767-1.605-.502.865 2.767 1.605c.859.498 1.984-.095 1.984-1.129V4.308c0-1.033-1.125-1.626-1.984-1.128L10.75 4.785l.502.865z"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-emoji-smile","opt-icon"],["fill-rule","evenodd","d","M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["fill-rule","evenodd","d","M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683z"],["d","M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"],[1,"bttn-post"],[1,"post-bttn",3,"click"]],template:function(t,e){if(1&t){const t=s.Nb();s.Mb(0,"article"),s.Mb(1,"div",0),s.Ib(2,"img",1),s.Lb(),s.Mb(3,"div",2),s.Ib(4,"div",3,4),s.Mb(6,"div",5),s.Mb(7,"div",6),s.Mb(8,"div",7),s.Wb(),s.Mb(9,"svg",8),s.Ib(10,"path",9),s.Ib(11,"path",10),s.Ib(12,"path",11),s.Lb(),s.Lb(),s.Vb(),s.Mb(13,"div",7),s.Wb(),s.Mb(14,"svg",12),s.Ib(15,"path",13),s.Ib(16,"path",14),s.Ib(17,"path",15),s.Lb(),s.Lb(),s.Vb(),s.Mb(18,"div",7),s.Wb(),s.Mb(19,"svg",16),s.Ib(20,"path",17),s.Ib(21,"path",18),s.Lb(),s.Lb(),s.Vb(),s.Mb(22,"div",7),s.Wb(),s.Mb(23,"svg",19),s.Ib(24,"path",20),s.Ib(25,"path",21),s.Ib(26,"path",22),s.Lb(),s.Lb(),s.Lb(),s.Vb(),s.Mb(27,"div",23),s.Mb(28,"div",24),s.Tb("click",(function(){s.gc(t);const o=s.ec(5);return e.publishPost(o.innerText)})),s.lc(29," Post "),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()}},styles:["article[_ngcontent-%COMP%]{display:flex;padding:1rem 1rem 0;border-bottom:.15rem solid var(--primary-color)}.a-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3.4rem;height:3.4rem;border-radius:50%;background-color:var(--hover-color);margin-right:.8rem;padding:.2rem}.a-content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.a-buttons[_ngcontent-%COMP%]{margin:.3rem 0}.a-buttons[_ngcontent-%COMP%], .bttn-opt[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icon-box[_ngcontent-%COMP%]{padding:.5rem;margin-right:.3rem;cursor:pointer;border-radius:500px}.icon-box[_ngcontent-%COMP%]:hover{background-color:var(--hover-color)}.opt-icon[_ngcontent-%COMP%]{color:var(--primary-color);width:1.6rem;height:1.6rem}.bttn-post[_ngcontent-%COMP%]{margin-left:auto}.post-bttn[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;padding:.4rem 3rem;border-radius:500px;text-align:center;display:inline;cursor:pointer;background-color:var(--primary-color)}.post-bttn[_ngcontent-%COMP%]:hover{background-color:#15ac59}#text-box[_ngcontent-%COMP%]{min-height:4rem;font-size:1.5rem;border:none;overflow:auto;outline:none;box-shadow:none}[contenteditable=true][_ngcontent-%COMP%]:empty:before{content:attr(placeholder);pointer-events:none;color:var(--secondary-color);display:block}"]}),t})(),f=(()=>{class t{getTime(t){const e=new Date,o=e.getTime()+6e4*e.getTimezoneOffset()+72e5,n=new Date(t).getTime(),i=new Date(o-n),s=i.getHours(),r=i.getMinutes();let c;return c=1==s?"an hour ago":s>0?s+" hours ago":r<=1?"a minute ago":r+" minutes ago",c.toString()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const m=["modal"],v=["*"];let M=(()=>{class t{constructor(){this.close=new s.n}ngOnInit(){}onDocumentClick(t){t.target===this.modal.nativeElement&&this.closeModal()}closeModal(){this.close.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Bb({type:t,selectors:[["app-modal"]],viewQuery:function(t,e){var o;1&t&&s.pc(m,!0),2&t&&s.dc(o=s.Ub())&&(e.modal=o.first)},hostBindings:function(t,e){1&t&&s.Tb("click",(function(t){return e.onDocumentClick(t)}),!1,s.fc)},outputs:{close:"close"},ngContentSelectors:v,decls:6,vars:0,consts:[[1,"modal"],["modal",""],[1,"modal-content"],[1,"close",3,"click"]],template:function(t,e){1&t&&(s.Zb(),s.Mb(0,"div",0,1),s.Mb(2,"div",2),s.Mb(3,"span",3),s.Tb("click",(function(){return e.closeModal()})),s.lc(4,"\xd7"),s.Lb(),s.Yb(5),s.Lb(),s.Lb())},styles:[".modal[_ngcontent-%COMP%]{position:fixed;z-index:2;padding-top:100px;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4)}.modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border-radius:30px;width:50%;background-color:var(--background-color)}.close[_ngcontent-%COMP%]{color:#aaa;float:right;font-size:28px;font-weight:700}.close[_ngcontent-%COMP%]:focus, .close[_ngcontent-%COMP%]:hover{color:#000;text-decoration:none;cursor:pointer}"]}),t})();function w(t,e){1&t&&s.Ib(0,"div",26)}function P(t,e){if(1&t){const t=s.Nb();s.Mb(0,"span",27),s.Mb(1,"button",28),s.Tb("click",(function(){s.gc(t);const e=s.Xb(2);return e.deletePost(e.post._id,e.post.parent)})),s.lc(2,"delete"),s.Lb(),s.Lb()}}function x(t,e){1&t&&(s.Mb(0,"span"),s.lc(1,"\xa0>\xa0"),s.Lb())}function L(t,e){if(1&t&&(s.Mb(0,"div",31),s.Mb(1,"span",32),s.lc(2),s.Lb(),s.jc(3,x,2,0,"span",0),s.Lb()),2&t){const t=e.$implicit,o=e.index,n=s.Xb(3);s.xb(2),s.mc(t),s.xb(1),s.ac("ngIf",o!==n.post.replyRef.length-1)}}function y(t,e){if(1&t&&(s.Mb(0,"div",29),s.Mb(1,"span"),s.lc(2,"Replying to\xa0"),s.Lb(),s.jc(3,L,4,2,"div",30),s.Lb()),2&t){const t=s.Xb(2);s.xb(3),s.ac("ngForOf",t.post.replyRef)}}function O(t,e){1&t&&(s.Mb(0,"span",33),s.lc(1,"\xa0~ published"),s.Lb())}function C(t,e){1&t&&(s.Mb(0,"span",33),s.lc(1,"\xa0~ liked"),s.Lb())}const _=function(t){return["/post",t]};function I(t,e){if(1&t){const t=s.Nb();s.Mb(0,"article"),s.Ib(1,"div",1),s.Mb(2,"div",2),s.Mb(3,"div",3),s.jc(4,w,1,0,"div",4),s.Ib(5,"img",5),s.Lb(),s.Mb(6,"div",6),s.Mb(7,"div",7),s.Mb(8,"span",8),s.lc(9),s.Lb(),s.Mb(10,"span",9),s.lc(11),s.Lb(),s.jc(12,P,3,0,"span",10),s.Lb(),s.jc(13,y,4,1,"div",11),s.Mb(14,"div"),s.lc(15),s.Lb(),s.Mb(16,"div",12),s.Mb(17,"div",13),s.Tb("click",(function(){return s.gc(t),s.Xb().onComment()})),s.Mb(18,"div",14),s.Wb(),s.Mb(19,"svg",15),s.Ib(20,"path",16),s.Lb(),s.Lb(),s.Vb(),s.Mb(21,"span",17),s.lc(22),s.jc(23,O,2,0,"span",18),s.Lb(),s.Lb(),s.Mb(24,"div",13),s.Tb("click",(function(){s.gc(t);const e=s.Xb();return e.likePost(e.post._id)})),s.Mb(25,"div",14),s.Wb(),s.Mb(26,"svg",19),s.Ib(27,"path",20),s.Lb(),s.Lb(),s.Vb(),s.Mb(28,"span",17),s.lc(29),s.jc(30,C,2,0,"span",18),s.Lb(),s.Lb(),s.Mb(31,"div",21),s.Mb(32,"div",22),s.Wb(),s.Mb(33,"svg",23),s.Ib(34,"path",24),s.Ib(35,"path",25),s.Lb(),s.Lb(),s.Vb(),s.Mb(36,"span",17),s.lc(37,"0"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&t){const t=s.Xb();s.xb(1),s.ac("routerLink",s.cc(12,_,t.post._id)),s.xb(3),s.ac("ngIf",t.isLast),s.xb(5),s.mc(t.post.owner.name),s.xb(2),s.oc("@",t.post.owner.username," - ",t.post.createdAt,""),s.xb(1),s.ac("ngIf",t.userId===t.post.owner._id),s.xb(1),s.ac("ngIf",0!==t.post.replyRef.length),s.xb(2),s.nc(" ",t.post.text," "),s.xb(7),s.nc(" ",t.post.child.length," "),s.xb(1),s.ac("ngIf",t.newReply),s.xb(6),s.nc(" ",t.post.likes," "),s.xb(1),s.ac("ngIf",null==t.post.whoLiked?null:t.post.whoLiked.includes(t.userId))}}function k(t,e){if(1&t){const t=s.Nb();s.Mb(0,"div"),s.Mb(1,"app-modal",34),s.Tb("close",(function(){return s.gc(t),s.Xb().closeModal()})),s.Mb(2,"app-post-publish",35),s.Tb("newPost",(function(e){return s.gc(t),s.Xb().onNewReply(e)})),s.Lb(),s.Lb(),s.Lb()}if(2&t){const t=s.Xb();s.xb(2),s.ac("postIdReply",t.post._id)}}let z=(()=>{class t{constructor(t,e,o){this.postsService=t,this.time=e,this.token=o,this.deleted=new s.n,this.replied=new s.n,this.comment=!1,this.newReply=!1}ngOnInit(){var t;this.post.createdAt=this.time.getTime(this.post.createdAt),this.userId=null===(t=this.token.getUserData())||void 0===t?void 0:t.id,this.post.replyRef=this.post.replyRef.map(t=>"@"+t)}likePost(t){this.postsService.likePost(t).subscribe(t=>{this.post.likes=t.likes,this.post.whoLiked=t.whoLiked})}deletePost(t,e=[]){this.postsService.deletePost(t).subscribe(o=>{this.deleted.emit({postId:t,parent:e})})}onComment(){this.comment=!0}onNewReply(t){this.replied.emit(t),this.closeModal(),this.newReply=!0,this.post.child=t.child}closeModal(){this.comment=!1}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(d),s.Hb(f),s.Hb(p.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["app-post"]],inputs:{post:["postData","post"],isLast:["show","isLast"]},outputs:{deleted:"deleted",replied:"replied"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"route",3,"routerLink"],[1,"post"],[1,"a-profile"],["class","thread-line",4,"ngIf"],["src","assets/avatar.png"],[1,"a-content"],[1,"a-acc"],[1,"a-name"],[1,"a-username"],["class","upper","style","margin-left: auto",4,"ngIf"],["class","replyRef upper",4,"ngIf"],[1,"a-buttons"],[1,"a-bttn-group",3,"click"],[1,"a-bttn-icon-box"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-chat","a-bttn-icon","upper"],["fill-rule","evenodd","d","M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"],[1,"a-bttn-count","upper"],["class","primary notify",4,"ngIf"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-heart","a-bttn-icon","upper"],["fill-rule","evenodd","d","M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"],[1,"a-bttn-group"],[1,"a-bttn-icon-box","a-bttn-icon"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-box-arrow-up-right","upper"],["fill-rule","evenodd","d","M1.5 13A1.5 1.5 0 0 0 3 14.5h8a1.5 1.5 0 0 0 1.5-1.5V9a.5.5 0 0 0-1 0v4a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 0 0-1H3A1.5 1.5 0 0 0 1.5 5v8zm7-11a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-1 0V2.5H9a.5.5 0 0 1-.5-.5z"],["fill-rule","evenodd","d","M14.354 1.646a.5.5 0 0 1 0 .708l-8 8a.5.5 0 0 1-.708-.708l8-8a.5.5 0 0 1 .708 0z"],[1,"thread-line"],[1,"upper",2,"margin-left","auto"],[3,"click"],[1,"replyRef","upper"],["class","arobas",4,"ngFor","ngForOf"],[1,"arobas"],[1,"aroba"],[1,"primary","notify"],[3,"close"],[3,"postIdReply","newPost"]],template:function(t,e){1&t&&(s.jc(0,I,38,14,"article",0),s.jc(1,k,3,1,"div",0)),2&t&&(s.ac("ngIf",e.post),s.xb(1),s.ac("ngIf",e.comment))},directives:[n.j,i.c,n.i,M,u],styles:["article[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative}.route[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;cursor:pointer}.replyRef[_ngcontent-%COMP%]{margin-bottom:.3rem;color:var(--secondary-color);font-size:.8rem}.notify[_ngcontent-%COMP%]{position:absolute}.arobas[_ngcontent-%COMP%]{display:inline-block}.aroba[_ngcontent-%COMP%]{color:#06b8ff;cursor:pointer}.aroba[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.post[_ngcontent-%COMP%]{padding:1rem 1rem 0}.a-acc[_ngcontent-%COMP%], .post[_ngcontent-%COMP%]{display:flex}.a-name[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color);font-weight:700;margin-right:.3rem}.a-username[_ngcontent-%COMP%]{color:#8899a6;font-size:1rem}.a-profile[_ngcontent-%COMP%]{display:flex;flex-direction:column}.a-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3.4rem;height:3.4rem;border-radius:50%;background-color:var(--hover-color);margin-right:.8rem;padding:.2rem;position:relative}.a-content[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.a-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem 0}.upper[_ngcontent-%COMP%]{z-index:1}.a-bttn-group[_ngcontent-%COMP%]{flex-direction:row;margin-right:auto}.a-bttn-group[_ngcontent-%COMP%], .a-bttn-icon-box[_ngcontent-%COMP%]{display:flex;align-items:center}.a-bttn-icon-box[_ngcontent-%COMP%]{padding:.7rem;border-radius:50%;cursor:pointer}.a-bttn-count[_ngcontent-%COMP%], .a-bttn-icon[_ngcontent-%COMP%]{color:var(--secondary-color)}.a-bttn-icon-box[_ngcontent-%COMP%]:hover{background-color:var(--hover-color)}.a-bttn-icon-box[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .a-bttn-icon-box[_ngcontent-%COMP%]:hover ~ .a-bttn-count[_ngcontent-%COMP%]{color:var(--primary-color)}.comment[_ngcontent-%COMP%]{padding:1rem 1rem 0}.thread-line[_ngcontent-%COMP%]{border-left:3px solid #8899a6;margin-left:30px;height:90%;margin-top:2rem;position:absolute;z-index:-2}"]}),t})();function j(t,e){if(1&t){const t=s.Nb();s.Mb(0,"div",4),s.Mb(1,"app-post",5),s.Tb("deleted",(function(e){return s.gc(t),s.Xb(2).deletePost(e)})),s.Lb(),s.Lb()}if(2&t){const t=e.$implicit;s.xb(1),s.ac("postData",t)}}function R(t,e){if(1&t&&(s.Mb(0,"div"),s.jc(1,j,2,1,"div",3),s.Lb()),2&t){const t=s.Xb();s.xb(1),s.ac("ngForOf",t.postsList)}}function T(t,e){if(1&t){const t=s.Nb();s.Mb(0,"div"),s.Ib(1,"div",9),s.Mb(2,"div",10),s.Mb(3,"app-post",7),s.Tb("replied",(function(e){return s.gc(t),s.Xb(3).addReply(e)}))("deleted",(function(e){return s.gc(t),s.Xb(3).deleteReply(e)})),s.Lb(),s.Lb(),s.Lb()}if(2&t){const t=e.$implicit,o=e.index,n=s.Xb().$implicit;s.xb(3),s.ac("show",o!==n.child.length-1)("postData",t)}}function V(t,e){if(1&t){const t=s.Nb();s.Mb(0,"div",6),s.Mb(1,"app-post",7),s.Tb("replied",(function(e){return s.gc(t),s.Xb(2).addReply(e)}))("deleted",(function(e){return s.gc(t),s.Xb(2).deletePost(e)})),s.Lb(),s.jc(2,T,4,2,"div",8),s.Lb()}if(2&t){const t=e.$implicit;s.xb(1),s.ac("show",0!==t.child.length)("postData",t),s.xb(1),s.ac("ngForOf",t.child)}}function S(t,e){if(1&t){const t=s.Nb();s.Mb(0,"div",1),s.Mb(1,"div",2),s.Mb(2,"div",3),s.Mb(3,"app-post",4),s.Tb("replied",(function(e){return s.gc(t),s.Xb().addPost(e)})),s.Lb(),s.Lb(),s.jc(4,V,3,3,"div",5),s.Lb(),s.Lb()}if(2&t){const t=s.Xb();s.xb(3),s.ac("postData",t.parentPost),s.xb(1),s.ac("ngForOf",t.parentPost.child)}}const X=[{path:"explore",component:(()=>{class t{constructor(t,e){this.postsService=t,this.locationService=e,this.postsList=[]}ngOnInit(){this.locationService.changeLocation("Explore",[]),this.postsService.subscribeToNewPosts().subscribe(t=>{this.postsService.getAllPosts().subscribe(t=>{this.postsList=t.data.data})})}deletePost(t){const e=t.postId;this.postsList=this.postsList.filter(t=>t._id!==e)}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(d),s.Hb(g.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["app-posts-list"]],decls:4,vars:1,consts:[[1,"container"],[1,"post-list"],[4,"ngIf"],["class","border",4,"ngFor","ngForOf"],[1,"border"],[3,"postData","deleted"]],template:function(t,e){1&t&&(s.Mb(0,"div",0),s.Mb(1,"div",1),s.Ib(2,"app-post-publish"),s.jc(3,R,2,1,"div",2),s.Lb(),s.Lb()),2&t&&(s.xb(3),s.ac("ngIf",e.postsList))},directives:[u,n.j,n.i,z],styles:[".container[_ngcontent-%COMP%]{width:100%;height:92%;display:flex;flex-direction:column}.post-list[_ngcontent-%COMP%]{overflow:scroll;flex-grow:1}.post-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.border[_ngcontent-%COMP%]{border-bottom:.15rem solid var(--primary-color)}"]}),t})()},{path:"post/:postId",component:(()=>{class t{constructor(t,e,o){this.route=t,this.postsService=e,this.locationService=o}ngOnInit(){this.getPostIdAndQuery()}getPostIdAndQuery(){this.route.params.subscribe(t=>{this.postsService.getPost(t.postId).subscribe(t=>{this.parentPost=t,this.locationService.changeLocation(0!==t.replyRef.length?"Reply":"Post",[])},t=>console.log(t))})}addPost(t){this.parentPost=t}addReply(t){this.parentPost.child.forEach(e=>{e._id===t._id&&(e.child=t.child)})}deletePost(t){const e=t.postId;this.parentPost.child=this.parentPost.child.filter(t=>t._id!==e)}deleteReply({postId:t,parent:e}){this.parentPost.child.forEach((o,n)=>{o._id===e[e.length-1]&&(this.parentPost.child[n].child=o.child.filter(e=>e._id!==t))})}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(i.a),s.Hb(d),s.Hb(g.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["app-post-article"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"post-list"],[1,"main-post"],[3,"postData","replied"],["class","reply-container",4,"ngFor","ngForOf"],[1,"reply-container"],[3,"show","postData","replied","deleted"],[4,"ngFor","ngForOf"],[1,"thread-line"],[1,"reply"]],template:function(t,e){1&t&&s.jc(0,S,5,2,"div",0),2&t&&s.ac("ngIf",e.parentPost)},directives:[n.j,z,n.i],styles:[".main-post[_ngcontent-%COMP%]{border-bottom:15px solid var(--primary-color)}.container[_ngcontent-%COMP%]{width:100%;height:92%;display:flex;flex-direction:column}.post-list[_ngcontent-%COMP%]{overflow:scroll;flex-grow:1}.post-list[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.reply-container[_ngcontent-%COMP%]{border-bottom:.15rem solid var(--primary-color)}"]}),t})()}];let H=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[i.f.forChild(X)],i.f]}),t})(),D=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[n.b,H]]}),t})()}}]);